{
    "$schema": "https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "variables": {
        "policySetName": "コロ助のポリシーナリ",
        "policySetDisplayName": "コロ助のポリシーなり",
        "policySetDescription": "コロ助の説明ナリ",
        "AssignmentName": "コロ助のイニシアティブナリ",



        "VM_SKU_Size": [ "basic_a0", "basic_a1", "basic_a2" ] //この行でSKUサイズを指定する
    },
    "resources": [
        {//この中でイニシアティブを定義する
            "type": "Microsoft.Authorization/policySetDefinitions",
            "apiVersion": "2023-04-01",
            "name": "[variables('policySetName')]",
            "properties": {
                "displayName": "[variables('policySetDisplayName')]",
                "description": "[variables('policySetDescription')]",
                "policyType": "Custom",
                "metadata": {
                    "category": "Naming convention"
                },

                "policyDefinitions": [
                    {
                        "policyDefinitionReferenceId": "許可されている仮想マシン サイズ SKU_1",
                        "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/cccc23c7-8427-4f53-ad12-b6a63eb452b3",
                        "definitionVersion": "1.*.*",
                        "parameters": {
                            "listOfAllowedSKUs": {
                                "value": "[variables('VM_SKU_Size')]"

                            }
                        },
                        "groupNames": []
                    }

                ]
            }
        },

        {//この中でイニシアティブの割り当てを定義する。
            "type": "Microsoft.Authorization/policyAssignments",
            "name": "[variables('AssignmentName')]",
            "apiVersion": "2019-09-01",
            "properties": {
                "policyDefinitionId": "[concat(subscription().id, '/providers/Microsoft.Authorization/policySetDefinitions/', variables('policySetName'))]"
            },
            "dependsOn": [
                "[variables('policySetName')]"
            ]
        }






    ]


}